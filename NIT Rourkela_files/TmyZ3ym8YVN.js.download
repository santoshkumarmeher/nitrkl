;/*FB_PKG_DELIM*/

__d("BladeRunnerDeferredClient",["Promise","nullthrows","requireDeferred"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(){this.$1=null}var o=t.prototype;return o.requestStream=function(t,n,o,a){return this.$2(),r("nullthrows")(this.$1).then(function(e){return e.requestStream(t,n,o,a)})},o.logInfo=function(t){return this.$2(),r("nullthrows")(this.$1).then(function(e){e.logInfo(t)})},o.bumpCounter=function(t){return this.$2(),r("nullthrows")(this.$1).then(function(e){e.bumpCounter(t)})},o.$2=function(){this.$1==null&&(this.$1=new(e||(e=n("Promise")))(function(e){r("requireDeferred")("BladeRunnerClient").__setRef("BladeRunnerDeferredClient").onReady(function(t){e(new t)})}))},t})(),u=new s;l.default=u}),98);
__d("BladeRunnerStreamHandler",[],(function(t,n,r,o,a,i){function e(e){throw new TypeError('"'+e+'" is read-only')}var l=(function(){function e(e,t,n,r,o,a){this.$1=e,this.$2=t,this.$3=n||function(e){},this.$4=r||function(e){},this.$5=o||function(e){},this.$6=a}var t=e.prototype;return t.onData=function(t){var e=this.$1,n=this.$2;if(e!=null)e(t.decodeData());else if(n!=null){for(var r=atob(t.rawData()),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);n(o.buffer)}},t.onStatusUpdate=function(t){this.$3(t)},t.onLog=function(t){this.$4(t)},t.onBatch=function(t){this.$5(t)},t.onClientCancel=function(){},t.getUpdatedRequestBody=function(){if(this.$6!=null)return this.$6()},e})();i.default=l}),66);
__d("BladeRunnerStreamStatus",[],(function(t,n,r,o,a,i){"use strict";var e={CREATED:0,ACCEPTED:1,REJECTED:2,STARTED:3,STOPPED:4,CLOSED:5};i.StreamStatus=e}),66);
__d("BladeRunnerInstrumentedStreamHandler",["BladeRunnerDeferredClient","BladeRunnerStreamHandler","BladeRunnerStreamStatus","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=6e4,s=(function(t){function n(n,o){var a;return a=t.call(this)||this,a.$BladeRunnerInstrumentedStreamHandler$p_1=n,a.$BladeRunnerInstrumentedStreamHandler$p_2=o,a.$BladeRunnerInstrumentedStreamHandler$p_3=Date.now(),a.$BladeRunnerInstrumentedStreamHandler$p_5=r("setTimeoutAcrossTransitions")(function(){a.$BladeRunnerInstrumentedStreamHandler$p_4==null&&a.$BladeRunnerInstrumentedStreamHandler$p_6(-1,Date.now())},e),a}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.onData=function(t){r("BladeRunnerDeferredClient").bumpCounter("received_data."+this.$BladeRunnerInstrumentedStreamHandler$p_2),this.$BladeRunnerInstrumentedStreamHandler$p_1.onData(t)},a.onStatusUpdate=function(t){this.$BladeRunnerInstrumentedStreamHandler$p_6(t,Date.now()),this.$BladeRunnerInstrumentedStreamHandler$p_1.onStatusUpdate(t)},a.onLog=function(t){this.$BladeRunnerInstrumentedStreamHandler$p_1.onLog(t)},a.onBatch=function(t){this.$BladeRunnerInstrumentedStreamHandler$p_1.onBatch(t)},a.onClientCancel=function(){this.$BladeRunnerInstrumentedStreamHandler$p_6(o("BladeRunnerStreamStatus").StreamStatus.CLOSED,Date.now())},a.$BladeRunnerInstrumentedStreamHandler$p_6=function(t,n){if(r("BladeRunnerDeferredClient").bumpCounter("received_status_"+t+"."+this.$BladeRunnerInstrumentedStreamHandler$p_2),this.$BladeRunnerInstrumentedStreamHandler$p_4==null){this.$BladeRunnerInstrumentedStreamHandler$p_4=n;var e=Math.max(this.$BladeRunnerInstrumentedStreamHandler$p_4-this.$BladeRunnerInstrumentedStreamHandler$p_3,0),o=e>=1e4?Math.round(Math.min(e/1e4,6))*10:Math.round(Math.min(e/1e3,10));r("BladeRunnerDeferredClient").bumpCounter("status_latency."+this.$BladeRunnerInstrumentedStreamHandler$p_2+"."+o+".s")}clearTimeout(this.$BladeRunnerInstrumentedStreamHandler$p_5)},n})(r("BladeRunnerStreamHandler"));l.default=s}),98);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err","getErrorSafe"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="_@_",m="3b",p="CacheStorageVersion",_={length:0,getItem:c=r("emptyFunction"),setItem:c,clear:c,removeItem:c,key:c},f=(function(){function e(e){this._store=e}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);n!=null&&e.push(n)}return e},t.get=function(t){return this._store.getItem(t)},t.set=function(t,n){this._store.setItem(t,n)},t.remove=function(t){this._store.removeItem(t)},t.clear=function(){this._store.clear()},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r!=null&&r.startsWith(t)&&this.remove(r)}},e})(),g=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getLocalStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getLocalStorage()},n})(f),h=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getSessionStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getSessionStorage()},n})(f),y=(function(){function e(){this._store={}}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){return Object.keys(this._store)},t.get=function(t){return this._store[t]===void 0?null:this._store[t]},t.set=function(t,n){this._store[t]=n},t.remove=function(t){t in this._store&&delete this._store[t]},t.clear=function(){this._store={}},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r.startsWith(t)&&this.remove(r)}},e.available=function(){return!0},e})(),C={memory:y,localstorage:g,sessionstorage:h},b=(function(){function t(e,t){this._changeCallbacks=[],this._key_prefix="_cs_";var o;this._exception=null,t&&(this._key_prefix=t),e==="AUTO"||!e?o="memory":o=e,o&&(!C[o]||!C[o].available()?((s||(s=r("ExecutionEnvironment"))).canUseDOM,this._backend=new y):this._backend=new C[o]);var a=this.useBrowserStorage();a&&n("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));var i=a?this._backend.getStore().getItem(p):this._backend.getStore()[p];i!==m&&this.clearOwnKeys()}var o=t.prototype;return o.useBrowserStorage=function(){return this._backend.getStore()===(e||(e=r("WebStorage"))).getLocalStorage()||this._backend.getStore()===(e||(e=r("WebStorage"))).getSessionStorage()},o.addValueChangeCallback=function(t){var e=this;return this._changeCallbacks.push(t),{remove:function(){e._changeCallbacks.slice(e._changeCallbacks.indexOf(t),1)}}},o._onBrowserValueChanged=function(t){this._changeCallbacks&&String(t.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(e){e(t.key,t.oldValue,t.newValue)})},o.keys=function(){var e=this,t=[];return(u||(u=r("ErrorGuard"))).guard(function(){if(e._backend)for(var n=e._backend.keys(),r=e._key_prefix.length,o=0;o<n.length;o++)n[o].substr(0,r)==e._key_prefix&&t.push(n[o].substr(r))},{name:"CacheStorage"})(),t},o.set=function(o,a,i){if(this._backend){if(this.useBrowserStorage()&&t._persistentWritesDisabled)return this._exception=r("err")("writes disabled"),!1;var e;typeof a=="string"?e=d+a:i?e=n("cr:8958").stringify(a):(e={__t:Date.now(),__v:a},e=n("cr:8958").stringify(e));for(var l=this._backend,s=this._key_prefix+o,u=!0,c=null;u;)try{c=null,l.set(s,e),u=!1}catch(e){c=r("getErrorSafe")(e);var m=l.keys().length;this._evictCacheEntries(),u=l.keys().length<m}return c!==null?(this._exception=c,!1):(this._exception=null,!0)}return this._exception=r("err")("no back end"),!1},o.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null},o.getLastSetException=function(){return this._exception},o.getStorageKeyCount=function(){var e=this._backend;return e?e.keys().length:0},o._evictCacheEntries=function(){var e=[],r=this._backend;r.keys().forEach(function(o){if(o!==p){var a=r.get(o);if(a===void 0){r.remove(o);return}if(!t._hasMagicPrefix(a)){try{a=n("cr:8958").parse(a,i.id)}catch(e){r.remove(o);return}a&&a.__t!==void 0&&a.__v!==void 0&&e.push([o,a.__t])}}}),e.sort(function(e,t){return e[1]-t[1]});for(var o=0;o<Math.ceil(e.length/2);o++)r.remove(e[o][0])},o.get=function(o,a){var e;if(this._backend)if((u||(u=r("ErrorGuard"))).applyWithGuard(function(){e=this._backend.get(this._key_prefix+o)},this,[],{onError:function(){e=null},name:"CacheStorage:get"}),e!=null)if(t._hasMagicPrefix(e))e=e.substr(d.length);else try{e=n("cr:8958").parse(e,i.id),e&&e.__t!==void 0&&e.__v!==void 0&&(e=e.__v)}catch(t){e=void 0}else e=void 0;return e===void 0&&a!==void 0&&(e=a,this.set(o,e)),e},o.remove=function(t){this._backend&&(u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+t],{name:"CacheStorage:remove"})},o._setVersion=function(){var e=this;(u||(u=r("ErrorGuard"))).applyWithGuard(function(){e.useBrowserStorage()?e._backend.getStore().setItem(p,m):e._backend.getStore()[p]=m},this,[],{name:"CacheStorage:setVersion"})},o.clear=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())},o.clearOwnKeys=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())},t.getAllStorageTypes=function(){return Object.keys(C)},t._hasMagicPrefix=function(t){return t.substr(0,d.length)===d},t.disablePersistentWrites=function(){t._persistentWritesDisabled=!0},t})();b._persistentWritesDisabled=!1,i.exports=b}),34);
__d("CometEventListener",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o){if(e.addEventListener)return e.addEventListener(t,n,o),{remove:function(){e.removeEventListener(t,n,typeof o!="boolean"?o.capture:o)}};throw r("FBLogger")("comet_infra").mustfixThrow('Attempted to listen to eventType "%s" on a target that does not have addEventListener.',t)}var s={addListenerWithOptions:function(n,r,o,a){return e(n,r,o,a)},bubbleWithPassiveFlag:function(n,r,o,a){return e(n,r,o,{capture:!1,passive:a})},capture:function(n,r,o){return e(n,r,o,!0)},captureWithPassiveFlag:function(n,r,o,a){return e(n,r,o,{capture:!0,passive:a})},listen:function(n,r,o){return e(n,r,o,!1)},registerDefault:function(t,n){throw r("FBLogger")("comet_infra").mustfixThrow("EventListener.registerDefault is not implemented.")},suppress:function(t){t.preventDefault(),t.stopPropagation()}};l.default=s}),98);
__d("DGWConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=3e4,s="prod",u=128,c=(e=n("$InternalEnum"))({NORMAL_CLOSURE:1e3,GOING_AWAY:1001,ABNORMAL_CLOSURE:1006,SERVER_INTERNAL_ERROR:1011,GRACEFUL_CLOSE:4e3,KEEPALIVE_TIMEOUT:4001,DGW_SERVER_ERROR:4002,UNAUTHORIZED:4003,REJECTED:4004,BAD_REQUEST:4005}),d=e({DrainReason_ELB:0,DrainReason_SLB:1,DrainReason_AppServerPush:2,DrainReason_GracePeriodExpired:3,DrainReason_Unknown:4});function m(e){switch(e){case d.DrainReason_ELB:return"DrainReason_ELB";case d.DrainReason_SLB:return"DrainReason_SLB";case d.DrainReason_AppServerPush:return"DrainReason_AppServerPush";case d.DrainReason_GracePeriodExpired:return"DrainReason_GracePeriodExpired";case d.DrainReason_Unknown:return"DrainReason_Unknown"}}var p=e({DGWVER_GENESIS:0,DGWVER_PREFIXED_APP_HEADERS:1,DGWVER_HANDLES_DGW_DRAIN_FRAME:2,DGWVER_HANDLES_DGW_DEAUTH_FRAME:3,DGWVER_HANDLES_STREAMGROUPS:4,DGWVER_BIG_IDS:5});function _(e){switch(e){case p.DGWVER_GENESIS:return"DGWVER_GENESIS";case p.DGWVER_PREFIXED_APP_HEADERS:return"DGWVER_PREFIXED_APP_HEADERS";case p.DGWVER_HANDLES_DGW_DRAIN_FRAME:return"DGWVER_HANDLES_DGW_DRAIN_FRAME";case p.DGWVER_HANDLES_DGW_DEAUTH_FRAME:return"DGWVER_HANDLES_DGW_DEAUTH_FRAME";case p.DGWVER_HANDLES_STREAMGROUPS:return"DGWVER_HANDLES_STREAMGROUPS";case p.DGWVER_BIG_IDS:return"DGWVER_BIG_IDS"}}var f=e({DgwCodecReturnCode_Success:0,DgwCodecReturnCode_Failure:1,DgwCodecReturnCode_NotEnoughData:2,DgwCodecReturnCode_OutOfMemory:3,DgwCodecReturnCode_AckIdOutOfBounds:4,DgwCodecReturnCode_InvalidParameter:5,DgwCodecReturnCode_InvalidFrameType:6,DgwCodecReturnCode_InvalidAckFrameLength:7,DgwCodecReturnCode_InvalidDrainReason:8,DgwCodecReturnCode_InvalidDataFrameLength:9,DgwCodecReturnCode_InvalidDrainFrameLength:10});function g(e){switch(e){case f.DgwCodecReturnCode_Success:return"DgwCodecReturnCode_Success";case f.DgwCodecReturnCode_Failure:return"DgwCodecReturnCode_Failure";case f.DgwCodecReturnCode_NotEnoughData:return"DgwCodecReturnCode_NotEnoughData";case f.DgwCodecReturnCode_OutOfMemory:return"DgwCodecReturnCode_OutOfMemory";case f.DgwCodecReturnCode_AckIdOutOfBounds:return"DgwCodecReturnCode_AckIdOutOfBounds";case f.DgwCodecReturnCode_InvalidParameter:return"DgwCodecReturnCode_InvalidParameter";case f.DgwCodecReturnCode_InvalidFrameType:return"DgwCodecReturnCode_InvalidFrameType";case f.DgwCodecReturnCode_InvalidAckFrameLength:return"DgwCodecReturnCode_InvalidAckFrameLength";case f.DgwCodecReturnCode_InvalidDrainReason:return"DgwCodecReturnCode_InvalidDrainReason";case f.DgwCodecReturnCode_InvalidDataFrameLength:return"DgwCodecReturnCode_InvalidDataFrameLength";case f.DgwCodecReturnCode_InvalidDrainFrameLength:return"DgwCodecReturnCode_InvalidDrainFrameLength"}}var h=e({DgwFrameType_Empty:2,DgwFrameType_Drain:3,DgwFrameType_Deauth:4,DgwFrameType_StreamGroup_DeprecatedEstabStream:5,DgwFrameType_StreamGroup_DeprecatedData:6,DgwFrameType_StreamGroup_SmallAck:7,DgwFrameType_StreamGroup_DeprecatedEndOfData:8,DgwFrameType_Ping:9,DgwFrameType_Pong:10,DgwFrameType_StreamGroup_Ack:12,DgwFrameType_StreamGroup_Data:13,DgwFrameType_StreamGroup_EndOfData:14,DgwFrameType_StreamGroup_EstabStream:15});function y(e){switch(e){case h.DgwFrameType_Empty:return"DgwFrameType_Empty";case h.DgwFrameType_Drain:return"DgwFrameType_Drain";case h.DgwFrameType_Deauth:return"DgwFrameType_Deauth";case h.DgwFrameType_StreamGroup_DeprecatedEstabStream:return"DgwFrameType_StreamGroup_DeprecatedEstabStream";case h.DgwFrameType_StreamGroup_DeprecatedData:return"DgwFrameType_StreamGroup_DeprecatedData";case h.DgwFrameType_StreamGroup_SmallAck:return"DgwFrameType_StreamGroup_SmallAck";case h.DgwFrameType_StreamGroup_DeprecatedEndOfData:return"DgwFrameType_StreamGroup_DeprecatedEndOfData";case h.DgwFrameType_Ping:return"DgwFrameType_Ping";case h.DgwFrameType_Pong:return"DgwFrameType_Pong";case h.DgwFrameType_StreamGroup_Ack:return"DgwFrameType_StreamGroup_Ack";case h.DgwFrameType_StreamGroup_Data:return"DgwFrameType_StreamGroup_Data";case h.DgwFrameType_StreamGroup_EndOfData:return"DgwFrameType_StreamGroup_EndOfData";case h.DgwFrameType_StreamGroup_EstabStream:return"DgwFrameType_StreamGroup_EstabStream"}}var C={HEADER_APPID:"x-dgw-appid",HEADER_APPVERSION:"x-dgw-appversion",HEADER_AUTHTYPE:"x-dgw-authtype",HEADER_AUTHTOKEN:"Authorization",HEADER_DEVICE_ID:"x-dgw-deviceid",HEADER_DGW_VERSION:"x-dgw-version",HEADER_LOGGING_ID:"x-dgw-loggingid",HEADER_REGIONHINT:"x-dgw-regionhint",HEADER_TARGET_TIER:"x-dgw-tier",HEADER_UUID:"x-dgw-uuid",HEADER_ESTABLISH_STREAM_FRAME_BASE64:"x-dgw-establish-stream-frame-base64",HEADER_STREAM_TRACE_ID:"x-dgw-streamtraceid",kShadowHeader:"x-dgw-shadow",APPHEADER_PREFIX:"x-dgw-app-",TRAFFIC_TRACING:"_nc_e2e"};i.DEFAULT_ACK_TIMEOUT_MS=l,i.DEFAULT_SERVICE_TIER=s,i.MAX_ACK_ID=u,i.WebsocketCloseCodes=c,i.DrainReason=d,i.drainReasonToDrainReasonString=m,i.DgwVersion=p,i.dgwVersionToString=_,i.DgwCodecReturnCode=f,i.DgwCodecReturnCodeToString=g,i.DgwFrameType=h,i.frameTypeToString=y,i.HEADER_CONSTANTS=C}),66);
__d("DGWEnvUtil",["DGWConstants","URI","WebStorage","cr:975"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(){if((e||(e=r("URI"))).isValidURI(window.location.href)){var t=new(e||(e=r("URI")))(window.location.href),n=t.getDomain(),o=c(n,t.getPath()),a=o.authToken,i=o.authType,l=o.endpoint,s=new e().setDomain(l).setProtocol("wss").setPath("/ws");this.$2=i,this.$1=s.toString(),this.$3=a}else this.$1="",this.$2=""}var n=t.prototype;return n.isDGWEnvCompatible=function(){return this.$1.length!==0&&this.$2.length!==0},n.getDGWEndpoint=function(){return this.$1},n.getDGWAuthType=function(){return this.$2},n.getDGWVersion=function(){return o("DGWConstants").DgwVersion.DGWVER_BIG_IDS},n.getDGWAuthToken=function(){return this.$3},t})();function c(e,t){if(e.includes("internalfb.com"))return{endpoint:"gateway.internalfb.com",authType:"INTERNALFB"};if(e.includes("workplace.com"))return{endpoint:"gateway.workplace.com",authType:"FACEBOOK"};if(e.includes("facebookenterprise.com"))return{endpoint:"gateway.facebookenterprise.com",authType:"ENTERPRISEFB"};if(e.includes("metaenterprise.com"))return{endpoint:"gateway.metaenterprise.com",authType:"ENTERPRISEFB"};if(e.includes("facebookrecruiting.com"))return{endpoint:"gateway.facebookrecruiting.com",authType:"RECRUITINGFB"};if(e.includes("metacareers.com"))return{endpoint:"gateway.metacareers.com",authType:"RECRUITINGFB"};if(e.includes("instagram.com"))return{endpoint:"gateway.instagram.com",authType:"INSTAGRAM"};if(e.includes("threads.com"))return{endpoint:"gateway.threads.com",authType:"INSTAGRAM"};if(e.includes("threads.net"))return{endpoint:"gateway.threads.net",authType:"INSTAGRAM"};if(e.includes("facebook.com")){if(t==="/comet_ai/hts_chat"){var o,a=(o=(s||(s=r("WebStorage"))).getSessionStorage())==null?void 0:o.getItem("dgw_auth_token");if(a!=null)return{endpoint:"gateway.facebook.com",authType:"GUEST",authToken:a}}return{endpoint:"gateway.facebook.com",authType:"FACEBOOK"}}if(e.includes("messenger.com"))return{endpoint:"gateway.messenger.com",authType:"FACEBOOK"};if(e.includes("work.meta.com"))return{endpoint:"gateway.work.meta.com",authType:"FACEBOOK"};if(e.includes("devicemanager.meta.com"))return{endpoint:"gateway.devicemanager.meta.com",authType:"FACEBOOK"};if(e.includes("horizon.meta.com"))return{endpoint:"gateway.horizon.meta.com",authType:"HORIZON_WEB"};if(e.includes("spark.meta.com"))return{endpoint:"gateway.spark.meta.com",authType:"SPARK_WEB"};if(/^.*developer.*oculus.com.*$/.test(e))return{endpoint:"gateway.oculus.com",authType:"OCULUS"};if(e.includes("developers.meta.com"))return{endpoint:"gateway.developers.meta.com",authType:"OCULUS"};if(e.includes("meta.ai")){var i=n("cr:975")==null?void 0:n("cr:975").accessToken,l=i!=null&&i.length>0;return{authType:l?"GUEST":"ABRA",endpoint:"gateway.meta.ai",authToken:l?i:void 0}}return e.includes("facebook.net")?{endpoint:"gateway.facebook.com",authType:"GUEST"}:{endpoint:"",authType:""}}var d=new u;l.default=d}),98);
__d("DGWRequestStreamDeferredClient",["Promise","gkx","nullthrows","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=null}var o=t.prototype;return o.createStream=function(t,n,o,a,i){return this.$2(),r("nullthrows")(this.$1).then(function(e){return e.createStream(t,n,o,a,i)})},o.$2=function(){this.$1==null&&(this.$1=new(e||(e=n("Promise")))(function(e){r("requireDeferred")("DGWRequestStreamClient").__setRef("DGWRequestStreamDeferredClient").onReady(function(t){e(new t(u()))})}))},t})();function u(){return{dgwStreamFactoryConfig:{log_dgw_streamgroup:r("gkx")("20920")},dgwRequestStreamRefConfig:{unlimited_retries_on_stream_error:r("gkx")("20916")}}}var c=new s;l.default=c}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(t,n,r,o,a,i){"use strict";i.default=n("CometEventListener")}),66);
__d("RequestStreamCommonRequestStreamCommonTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({Accepted:1,Started:2,Stopped:3}),s=e({Rejected:40,Error:50,TryAgain:80,Closed:99}),u=e({BestEffort:0,Socket:10,Device:20}),c=e({Flow_status:"flow_status",Log:"log",Rewrite:"rewrite",Data:"data",Termination:"termination",Amend_ack:"amend_ack"});a.exports={AckLevel:u,FlowStatus:l,StreamResponseDelta$Types:c,TerminationReason:s}}),null);
__d("MQTTRequestStreamUtils",["BladeRunnerStreamHandler","BladeRunnerStreamStatus","RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";var e="Stream closed",s="Stream rejected";function u(t){var n=function(r){switch(r){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:t.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:t.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started);break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:t.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:t.onTermination(e);break;case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:t.onTermination(s);break}};return new(r("BladeRunnerStreamHandler"))(function(e){return t.onData(e)},null,n,function(e){return t.onLog(e)},null,function(){return t.onRetryUpdateRequestBody()})}l.TERMINATION_REASON_CLOSED=e,l.TERMINATION_REASON_REJECTED=s,l.convertToBRHandler=u}),98);
__d("MetaconfigWebExposureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7235"),s=o("FalcoLoggerInternal").create("metaconfig_web_exposure",e),u=s;l.default=u}),98);
__d("MetaConfig",["invariant","BanzaiLazyQueue","ExecutionEnvironment","MetaConfigMap","MetaconfigWebExposureFalcoEvent","MobileConfigExposureLogFalcoEvent","justknobx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u={},c={_:function(n){var t=r("MetaConfigMap").get(n);t!=null||s(0,57910,n);var a=t.log_id,i=t.value;if(a!=null&&u[n]!==!0){if((e||(e=r("ExecutionEnvironment"))).isInBrowser){var l=n.split(":"),c=l.length>=3?l[2]:null,d=l.length>=4?l[3]:null;r("justknobx")._("822")?(r("MetaconfigWebExposureFalcoEvent").log(function(){return{identifier:n,log_id:a}}),r("MobileConfigExposureLogFalcoEvent").log(function(){return{logging_id:a,stable_spec:c!=null?c+":"+(d!=null?d:""):null,extra_ids:"falco"}})):o("BanzaiLazyQueue").queuePost("metaconfig_exposure",{identifier:n,log_id:a})}u[n]=!0}return i}},d=c;l.default=d}),98);
__d("RequestStreamHandler",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.onData,n=e.onFlowStatus,r=e.onLog,o=e.onRetryUpdateRequestBody,a=e.onTermination;this.$1=t||function(e){},this.$2=a||function(e){},this.$3=r||function(e){},this.$4=n,this.$5=o}var t=e.prototype;return t.onFlowStatus=function(t){this.$4(t)},t.onData=function(t){this.$1(t)},t.onTermination=function(t){this.$2(r("err")(t))},t.onLog=function(t){this.$3(t)},t.onRetryUpdateRequestBody=function(){if(this.$5!=null)return this.$5()},e})();l.default=e}),98);
__d("SCIsolationRollout",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.startsWith("FBLQ:")||e.startsWith("GRAPHQL:")||e.startsWith("FBGQLS:")||e.startsWith("IGGQLS:")?!0:e==="MLCInternCollab"||e==="MLCCollab"?r("gkx")("3193"):!1}l.shouldUseSCIsolation=e}),98);
__d("TransportSelectingClientCCResolver",["Promise","TransportSelectingClientContextualConfig","asyncToGeneratorRuntime","nullthrows","requireDeferred"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(){this.$1=null}var o=t.prototype;return o.getCCGroupName=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){this.$2();var t=yield r("nullthrows")(this.$1),n=new t(JSON.parse(r("TransportSelectingClientContextualConfig").rawConfig)).resolve({method:e});return n.get("group","default_group")});function t(t){return e.apply(this,arguments)}return t})(),o.getCCDGWUpsampleMultiplier=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){this.$2();var t=yield r("nullthrows")(this.$1),n=new t(JSON.parse(r("TransportSelectingClientContextualConfig").rawConfig)).resolve({method:e});return n.get("dgwUpsampleMultiplier",1)});function t(t){return e.apply(this,arguments)}return t})(),o.$2=function(){this.$1==null&&(this.$1=new(e||(e=n("Promise")))(function(e){r("requireDeferred")("ContextualConfig").__setRef("TransportSelectingClientCCResolver").onReady(function(t){e(t)})}))},t})(),u=new s;l.default=u}),98);
__d("TransportSelectingClientUtils",["BladeRunnerInstrumentedStreamHandler","DGWEnvUtil","MQTTRequestStreamUtils","TransportSelectingClientCCResolver","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MQTTRequestStreamUtils").convertToBRHandler(e);return t.startsWith("FBGQLS")||t.startsWith("SKY")?new(r("BladeRunnerInstrumentedStreamHandler"))(n,t):n}function s(e){var t=!1;switch(e){case"group1":t=r("gkx")("20921");break;case"group2":t=r("gkx")("20922");break;case"group3":t=r("gkx")("20923");break;case"group4":t=r("gkx")("20924");break;case"group5":t=r("gkx")("20925");break;case"group6":t=r("gkx")("20926");break}return t}function u(e){var t=!1;switch(e){case"skywalker":t=!0;break;case"skywalker_experiment1":t=!0;break;case"skywalker_experiment2":t=!0;break;case"skywalker_bulletin":t=!0;break}return t}function c(e){if(e!=null){var t=e.lastIndexOf("/"),n=t>0?e.substr(0,t):e;return n}}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=c(e);if(t!=null){var n=yield r("TransportSelectingClientCCResolver").getCCGroupName(t);return u(n)&&r("DGWEnvUtil").isDGWEnvCompatible()}return!1}),m.apply(this,arguments)}function p(e,t){var n=c(t);return e!=null&&e==="SKY"&&n!=null?n:e!=null?e:"unknown"}l.BRHandlerConverter=e,l.isDGWStream=s,l.isDGWAllowedSKYTopic=u,l.getTopicPrefix=c,l.isDGWSupportedSKYTopic=d,l.getMethodContextForCC=p}),98);
__d("TransportSelectingClient",["BladeRunnerDeferredClient","DGWEnvUtil","DGWRequestStreamDeferredClient","ODS","RequestStreamHandler","SCIsolationRollout","TransportSelectingClientUtils","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){var e,s="streamcontroller",u=(function(){function t(){this.$1=r("DGWRequestStreamDeferredClient")}var a=t.prototype;return a.requestStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l){var u,c=new(r("RequestStreamHandler"))(a);if(r("DGWEnvUtil").isDGWEnvCompatible()){t.method!=null&&(e||(e=o("ODS"))).bumpEntityKey(110,"TransportSelectingClient",t.method+".dgw_client.request_stream");var d=yield this.$1.createStream(t,n,i,c,{deviceId:r("uuidv4")(),serviceId:o("SCIsolationRollout").shouldUseSCIsolation(t.method)?s:null,authType:l==null?void 0:l.authType,authToken:l==null?void 0:l.authToken});return yield d.start(),d}t.method!=null&&(e||(e=o("ODS"))).bumpEntityKey(110,"TransportSelectingClient",t.method+".bladerunner_client.request_stream");var m=yield r("BladeRunnerDeferredClient").requestStream(t,n,o("TransportSelectingClientUtils").BRHandlerConverter(c,(u=t.method)!=null?u:"unknown"),i);return m});function a(e,n,r,o,a){return t.apply(this,arguments)}return a})(),t})();l.default=u}),98);
__d("TransportSelectingClientSingleton",["TransportSelectingClient"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("TransportSelectingClient"));l.default=e}),98);
__d("VideoDisplayTimePlayButton",["CSS","DataStore","Event"],(function(t,n,r,o,a,i,l){"use strict";var e={},s="_spinner";function u(e){return o("DataStore").get(e,"clicked",!1)}function c(t,n){var a=t.id;e[a]=r("Event").listen(t,"click",function(){n&&(o("CSS").hide(t),o("CSS").show(n)),o("DataStore").set(t,"clicked",!0)}),n&&(e[a+s]=r("Event").listen(n,"click",function(){n&&o("CSS").hide(n),o("CSS").show(t),o("DataStore").set(t,"clicked",!1)}))}function d(t){var n=t.id;Object.prototype.hasOwnProperty.call(e,n)&&e[n].remove();var r=n+s;Object.prototype.hasOwnProperty.call(e,r)&&e[r].remove()}l.getClicked=u,l.register=c,l.unregister=d}),98);
__d("VideosRenderingInstrumentation",["DataStore","VideoPlayerHTML5Experiments","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){var e;function s(t){var n=r("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?(e||(e=r("performanceAbsoluteNow")))():Date.now();return o("DataStore").set(t,"videos_rendering_instrumentation",n),n}function u(e){var t=o("DataStore").get(e,"videos_rendering_instrumentation",NaN);return Number.isNaN(t)&&(t=s(e)),t}l.storeRenderTime=s,l.retrieveRenderTime=u}),98);
__d("XHRHttpError",[],(function(t,n,r,o,a,i){"use strict";var e="HTTP_CLIENT_ERROR",l="HTTP_PROXY_ERROR",s="HTTP_SERVER_ERROR",u="HTTP_TRANSPORT_ERROR",c="HTTP_UNKNOWN_ERROR";function d(t,n){if(n===0){var r=t.getProtocol();return r==="file"||r==="ftp"?null:u}else return n>=100&&n<200?l:n>=200&&n<300?null:n>=400&&n<500?e:n>=500&&n<600?s:n>=12001&&n<12156?u:c}i.HTTP_CLIENT_ERROR=e,i.HTTP_PROXY_ERROR=l,i.HTTP_SERVER_ERROR=s,i.HTTP_TRANSPORT_ERROR=u,i.HTTP_UNKNOWN_ERROR=c,i.getErrorCode=d}),66);
__d("xhrSimpleDataSerializer",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}i.default=e}),66);
__d("XHRRequest",["invariant","DTSGUtils","Env","ErrorGuard","FBLogger","LSD","Log","NetworkStatus","ResourceTimingsStore","ResourceTypes","SprinkleConfig","TimeSlice","URI","XHRHttpError","ZeroRewrites","cr:8959","cr:8960","fb-error","getAsyncHeaders","performance","xhrSimpleDataSerializer"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=n("fb-error").ErrorXFBDebug,m=!1,p=!1,_={loadedBytes:0,totalBytes:0};function f(t){return n("ZeroRewrites").rewriteURI(new(e||(e=n("URI")))(t))}var g=(function(){"use strict";function t(e){this.$3=function(){return null},this.$20=f(e),this.$7="POST",this.$6={},this.setResponseType(null),this.setTransportBuilder(n("ZeroRewrites").getTransportBuilderForURI(this.getURI())),this.setDataSerializer(n("xhrSimpleDataSerializer")),this.$12=n("ResourceTimingsStore").getUID(n("ResourceTypes").XHR,e!=null?e.toString():"")}var r=t.prototype;return r.setURI=function(t){return this.$20=f(t),this},r.getURI=function(){return this.$20},r.setResponseType=function(t){return this.$14=t,this},r.setMethod=function(t){return this.$7=t,this},r.getMethod=function(){return this.$7},r.setData=function(t){return this.$2=t,this},r.getData=function(){return this.$2},r.setRawData=function(t){return this.$11=t,this},r.setRequestHeader=function(t,n){return this.$6[t]=n,this},r.setTimeout=function(t){return this.$15=t,this},r.getTimeout=function(){return this.$15},r.setResponseHandler=function(t){return this.$13=t,this},r.getResponseHandler=function(){return this.$13},r.setErrorHandler=function(t){return this.$5=t,this},r.getErrorHandler=function(){return this.$5},r.setNetworkFailureHandler=function(t){return this.$8=t,this},r.getNetworkFailureHandler=function(){return this.$8},r.getResponseHeader=function(t){var e=this.$9;return e?e.getResponseHeader(t):null},r.setAbortHandler=function(t){return this.$1=t,this},r.getAbortHandler=function(){return this.$1},r.setTimeoutHandler=function(t){return this.$16=t,this},r.getTimeoutHandler=function(){return this.$16},r.setUploadProgressHandler=function(t){return this.$19=t,this},r.setDownloadProgressHandler=function(t){return this.$4=t,this},r.setTransportBuilder=function(t){return!this.$18||!n("ZeroRewrites").isRewritten(this.$20)?this.$18=t:n("FBLogger")("iorg-FOS").blameToPreviousFile().mustfix("can not set new TransportBuilder for the request %s",String(this.getURI())),this},r.setDataSerializer=function(t){return this.$3=t,this},r.setWithCredentials=function(t){return this.$21=t,this},r.send=function(){var t=this.$15,r=this.$18;if(!r)return;var o=r(),a=this.getURI();if(a.toString().includes("/../")||a.toString().includes("/..\\")||a.toString().includes("\\../")||a.toString().includes("\\..\\"))return n("Log").error("XHRRequest.send(): path traversal is not allowed."),!1;if(m===!0)return;var i=new(e||(e=n("URI")))(a).getQualifiedURI().toString(),u=this.$12;n("ResourceTimingsStore").updateURI(n("ResourceTypes").XHR,u,i),n("ResourceTimingsStore").measureRequestSent(n("ResourceTypes").XHR,u),this.$9=o;var c;this.$7==="POST"||!this.$11||l(0,2346,this.$11,a);var d=(s||(s=n("Env"))).force_param;if(d&&(this.$2=babelHelpers.extends({},this.getData()||{},d)),this.$7==="GET"&&n("DTSGUtils").shouldAppendToken(a)){var p=n("cr:8960").getCachedToken?n("cr:8960").getCachedToken():n("cr:8960").getToken();p&&(this.$2?this.$2.fb_dtsg_ag=p:this.$2={fb_dtsg_ag:p},n("SprinkleConfig").param_name&&(this.$2[n("SprinkleConfig").param_name]=n("DTSGUtils").getNumericValue(p)))}if(this.$7==="POST"&&n("DTSGUtils").shouldAppendToken(a)){var _=n("cr:8959").getCachedToken?n("cr:8959").getCachedToken():n("cr:8959").getToken();_&&(this.$2?this.$2.fb_dtsg=_:this.$2={fb_dtsg:_},n("SprinkleConfig").param_name&&(this.$2[n("SprinkleConfig").param_name]=n("DTSGUtils").getNumericValue(_))),n("LSD").token&&(this.$2?this.$2.lsd=n("LSD").token:this.$2={lsd:n("LSD").token},n("SprinkleConfig").param_name&&!_&&(this.$2[n("SprinkleConfig").param_name]=n("DTSGUtils").getNumericValue(n("LSD").token)))}this.$7==="GET"||this.$11?(a.addQueryData(this.$2),c=this.$11):c=this.$3(this.$2);function f(e){n("ResourceTimingsStore").measureResponseReceived(n("ResourceTypes").XHR,u);for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e.apply(this,r)}var g=n("TimeSlice").guard(f,"XHRRequest response received",{propagationType:n("TimeSlice").PropagationType.CONTINUATION});o.onreadystatechange=this.$22(g),o.onerror=this.$23(g),o.upload&&this.$19&&(o.upload.onprogress=this.$24.bind(this)),this.$4&&(o.onprogress=this.$25.bind(this)),t&&(this.$17=setTimeout(this.$26.bind(this),t)),this.$21!=null&&(o.withCredentials=this.$21),o.open(this.$7,a.toString(),!0);var h=!1;if(this.$6)for(var y in this.$6)y.toLowerCase()==="content-type"&&(h=!0),o.setRequestHeader(y,this.$6[y]);this.$7=="POST"&&!this.$11&&!h&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var C=n("getAsyncHeaders")(a);Object.keys(C).forEach(function(e){o.setRequestHeader(e,C[e])}),this.$14==="arraybuffer"&&("responseType"in o?o.responseType="arraybuffer":"overrideMimeType"in o?o.overrideMimeType("text/plain; charset=x-user-defined"):"setRequestHeader"in o&&o.setRequestHeader("Accept-Charset","x-user-defined")),this.$14==="blob"&&(o.responseType=this.$14),o.send(c)},r.abort=function(t){this.$27(),this.$1&&(u||(u=n("ErrorGuard"))).applyWithGuard(this.$1,null,[t],{name:"XHRRequest:_abortHandler"})},r.$27=function(){var e=this.$9;e&&(e.onreadystatechange=null,e.abort()),this.$28()},r.$26=function(){this.$27(),this.$16&&(u||(u=n("ErrorGuard"))).applyWithGuard(this.$16,null,[],{name:"XHRRequest:_abortHandler"})},r.$29=function(t){if(this.$14){if("response"in t)return t.response;if(this.$14==="arraybuffer"&&window.VBArray)return window.VBArray(t.responseBody).toArray()}return t.responseText},r.$23=function(t){var e=this,r=this.$9;return function(){var o,a={errorCode:n("XHRHttpError").HTTP_TRANSPORT_ERROR,errorMsg:"Network Failure.",errorType:"Network",errorRawResponseHeaders:null,errorRawTransport:r==null||(o=r.constructor)==null?void 0:o.name,errorRawTransportStatus:0};e.$8?(u||(u=n("ErrorGuard"))).applyWithGuard(t.bind(void 0,e.$8),null,[a],{name:"XHRRequest:_networkFailureHandler"}):t(function(){}),n("NetworkStatus").reportError()}},r.$22=function(t){var e=this,r=n("TimeSlice").guard(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(this,n)},"XHRRequest onreadystatechange",{propagationType:n("TimeSlice").PropagationType.EXECUTION});return function(){var o=e.$9;if(o!=null){var a=o.readyState;if(a>=2){var i=a===4;i&&d.addFromXHR(o);var l=e.getURI(),s=n("XHRHttpError").getErrorCode(l,o.status),m=e.$13;if(s!=null){if(i){var _=119500;s==="HTTP_TRANSPORT_ERROR"&&e.$10&&e.$10+_<(c||(c=n("performance"))).now()&&(s="HTTP_STREAM_TIMEOUT");var f={errorCode:s,errorMsg:e.$29(o),errorRawTransport:o.constructor.name,errorRawTransportStatus:o.status,errorRawResponseHeaders:m&&m.includeHeaders?o.getAllResponseHeaders():null,errorType:o.status?"HTTP "+o.status:"HTTP"};e.$5?(u||(u=n("ErrorGuard"))).applyWithGuard(t.bind(void 0,e.$5),null,[f],{name:"XHRRequest:_errorHandler"}):t(function(){})}}else if(m){if(i||m.parseStreaming&&a===3){var g=i?t:r,h=m!=null&&m.includeHeaders?o.getAllResponseHeaders():null,y=e.$29(o);e.$10=(c||(c=n("performance"))).now();var C=200*1e3*1e3;m.parseStreaming&&typeof y=="string"&&y.length>C&&!p&&(p=!0,n("FBLogger")("comet_infra").mustfix("Streaming reponse exceeding size limits and will OOM soon: %s",String(e.getURI()))),(u||(u=n("ErrorGuard"))).applyWithGuard(g.bind(void 0,m),null,[y,h,i],{name:"XHRRequest:handler"})}}else i&&t(function(){});i&&(s!="HTTP_TRANSPORT_ERROR"&&n("NetworkStatus").reportSuccess(),e.$28())}}}},r.$24=function(t){_.loadedBytes=t.loaded,_.totalBytes=t.total,this.$19&&(u||(u=n("ErrorGuard"))).applyWithGuard(this.$19,null,[_],{name:"XHRRequest:_uploadProgressHandler"})},r.$25=function(t){var e={loadedBytes:t.loaded,totalBytes:t.total};this.$4&&(u||(u=n("ErrorGuard"))).applyWithGuard(this.$4,null,[e],{name:"XHRRequest:_downloadProgressHandler"})},r.$28=function(){clearTimeout(this.$17),delete this.$9},t.disable=function(){m=!0},t})();a.exports=g}),null);
__d("generateLiteTypedLogger",["Banzai","JstlMigrationFalcoEvent","getDataWithLoggerOptions"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=e.split(":")[0],a=e.split(":")[1];o=="logger"?r("JstlMigrationFalcoEvent").log(function(){return{logger_config_name:a,payload:t}}):r("Banzai").post(e,t,n)}function s(t){return{log:function(o,a){e(t,r("getDataWithLoggerOptions")(o,a),r("Banzai").BASIC)},logVital:function(o,a){e(t,r("getDataWithLoggerOptions")(o,a),r("Banzai").VITAL)},logImmediately:function(o,a){e(t,r("getDataWithLoggerOptions")(o,a),{signal:!0})}}}l.default=s}),98);